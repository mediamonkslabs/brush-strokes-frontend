(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports={canvasScaleContainer:"Canvas_canvasScaleContainer__1rQdP",canvasContainer:"Canvas_canvasContainer__2QqR1",spinner:"Canvas_spinner__2538x",rotate:"Canvas_rotate__34PxN",spinnerVisible:"Canvas_spinnerVisible__2tcPD"}},17:function(e,t,n){e.exports={root:"CustomCursor_root__1_0fR",cursor:"CustomCursor_cursor__19cVK",cursorVisible:"CustomCursor_cursorVisible__1I-sY"}},22:function(e,t,n){e.exports=n.p+"static/media/shadertoyNoise.7c756fce.png"},23:function(e,t,n){e.exports=n.p+"static/media/empty.f6d111fe.jpg"},34:function(e,t,n){e.exports=n.p+"static/media/structure.41919d7b.jpg"},35:function(e,t,n){var i=n(58),r=["load","next"];e.exports=function(){var e=new Worker(n.p+"cf8cc01e8ebb5d36de98.worker.js",{name:"[hash].worker.js"});return i(e,r),e.ready=new Promise(function(t){e.addEventListener("ready",function(){t(e)})}),e}},36:function(e,t,n){e.exports={root:"Loader_root__2xEwR"}},37:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA4LTEyVDE2OjA0OjI2LTA0OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wOC0xMlQxNjowNDo0OS0wNDowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wOC0xMlQxNjowNDo0OS0wNDowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NGRjNDdiNC1iMWQ4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"},39:function(e,t,n){e.exports=n.p+"static/media/mute.6ad13fb3.svg"},40:function(e,t,n){e.exports=n.p+"static/media/unmute.56fd3ccf.svg"},41:function(e,t,n){e.exports=n.p+"static/media/cursor.7b8e4782.svg"},43:function(e,t,n){e.exports=n(64)},48:function(e,t,n){},5:function(e,t,n){e.exports={root:"App_root__1Jh3p",app:"App_app__1IksY",header:"App_header__2MS2l",headerMenu:"App_headerMenu__S5uHZ",headerButton:"App_headerButton__3wspi"}},64:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(32),s=n.n(a),o=(n(48),n(1)),c=n(4),h=n(13),u=n.n(h),l=n(20),f=n(42),g=n(3),m=n(2),v=n(11),d=n(9),p=n(12),E=n(10),b=n.n(E);function x(e){var t=e.getContext("2d");if(null===t)throw new Error("Unable to get 2d context for canvas");return t}function R(e,t){if(!0===(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return x(new OffscreenCanvas(e,t));var n=document.createElement("canvas");return n.setAttribute("width",e.toString()),n.setAttribute("height",t.toString()),x(n)}var I=function(e){var t=R(e.width,e.height);return t.putImageData(e,0,0),t},y=function(e,t,n){var i=R(t,n),r=I(e);return i.drawImage(r.canvas,0,0,t,n),i.getImageData(0,0,t,n)},A=function(){var e=document.createElement("canvas");return e.style.setProperty("position","absolute"),e.style.setProperty("z-index","999999"),e.style.setProperty("top","0"),e.style.setProperty("left","0"),e.style.setProperty("pointer-events","none"),function(e){}}(),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return function(e){var t,n=!1,i=function(){cancelAnimationFrame(r),n=!0},r=-1;return r=window.requestAnimationFrame(function a(s){void 0===t&&(t=s),n||(r=window.requestAnimationFrame(a),e(s-t,i))}),i}(function(n,i){e(t/1e3*n,i)})},C=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),t}(Object(E.createEventClass)()("UPDATE")),P=function(e){function t(e,n){var i;return Object(m.a)(this,t),(i=Object(v.a)(this,Object(d.a)(t).call(this))).canvasWidth=e,i.canvasHeight=n,i.currentFrame=0,i.frames=[],i.context=void 0,i.context=R(e,n),i}return Object(p.a)(t,e),Object(g.a)(t,[{key:"addFrames",value:function(e){var t;(t=this.frames).push.apply(t,Object(f.a)(e))}},{key:"animate",value:function(){var e=this,t=this.currentFrame;S(function(n,i){var r=Math.floor(n+t);if(void 0===e.frames[r])return e.currentFrame=r,void i();r!==e.currentFrame&&(e.currentFrame=r,e.drawImage(e.frames[r]),e.dispatchEvent(new C(C.types.UPDATE,e.context.canvas)))},15)}},{key:"drawImage",value:function(e){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.putImageData(e,0,0,0,0,this.context.canvas.width,this.context.canvas.height)}}]),t}(b.a),T=function(e){function t(){return Object(m.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),t}(Object(E.createEventClass)()("DRAW","DRAW_COMPLETE")),O=function(e){function t(e,n,i,r,a){var s;return Object(m.a)(this,t),(s=Object(v.a)(this,Object(d.a)(t).call(this))).targetEventContainer=e,s.canvasWidth=n,s.canvasHeight=i,s.eventScaleX=r,s.eventScaleY=a,s.isPointerDown=!1,s.context=void 0,s.pointerId=void 0,s.brushSize=5,s.blur=5,s.maxStrokeLength=250,s.currentStrokeLength=0,s.previousPointerPosition={x:-1,y:-1},s.context=x(new OffscreenCanvas(n*devicePixelRatio,i*devicePixelRatio)),s.clear(),s.attachEventListeners(),s}return Object(p.a)(t,e),Object(g.a)(t,[{key:"attachEventListeners",value:function(){var e=this.onPointerDown.bind(this),t=this.onPointerUp.bind(this),n=this.onPointerMove.bind(this);this.targetEventContainer.addEventListener("pointerdown",e),this.targetEventContainer.addEventListener("pointerup",t),this.targetEventContainer.addEventListener("pointermove",n)}},{key:"onPointerDown",value:function(e){!0!==this.isPointerDown&&(e.preventDefault(),this.pointerId=e.pointerId,this.isPointerDown=!0,this.currentStrokeLength=0,this.previousPointerPosition.x=e.offsetX*devicePixelRatio,this.previousPointerPosition.y=e.offsetY*devicePixelRatio)}},{key:"onPointerUp",value:function(e){!1!==this.isPointerDown&&this.pointerId===e.pointerId&&(e.preventDefault(),this.isPointerDown=!1,this.dispatchEvent(new T(T.types.DRAW_COMPLETE,this.getCurrentImage())),this.clear())}},{key:"getCurrentImage",value:function(){return y(this.context.getImageData(0,0,this.context.canvas.width,this.context.canvas.height),this.context.canvas.width/devicePixelRatio,this.context.canvas.height/devicePixelRatio)}},{key:"onPointerMove",value:function(e){if(!1!==this.isPointerDown&&this.pointerId===e.pointerId){e.preventDefault();var t=e.offsetX*devicePixelRatio,n=e.offsetY*devicePixelRatio,i=this.currentStrokeLength+Math.hypot(this.previousPointerPosition.x/this.eventScaleX-t/this.eventScaleX,this.previousPointerPosition.y/this.eventScaleY-n/this.eventScaleY);this.currentStrokeLength=i,i>this.maxStrokeLength||(this.drawLine({x:this.previousPointerPosition.x/this.eventScaleX,y:this.previousPointerPosition.y/this.eventScaleY},{x:t/this.eventScaleX,y:n/this.eventScaleY}),this.dispatchEvent(new T(T.types.DRAW,y(this.context.getImageData(0,0,this.context.canvas.width,this.context.canvas.height),this.context.canvas.width/devicePixelRatio,this.context.canvas.height/devicePixelRatio))),this.previousPointerPosition={x:t,y:n})}}},{key:"drawLine",value:function(e,t){var n=e.x,i=e.y,r=t.x,a=t.y;this.context.lineWidth=this.brushSize*devicePixelRatio,this.context.filter="blur(".concat(this.blur,"px)"),this.context.strokeStyle="#000000",this.context.lineJoin=this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(n,i),this.context.lineTo(r,a),this.context.stroke(),this.context.closePath()}},{key:"clear",value:function(){this.context.fillStyle="white",this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.lineWidth=this.brushSize*devicePixelRatio,this.context.filter="blur(".concat(this.blur,"px)")}}]),t}(b.a),w=n(33),D=n(21),B=new D.GUI({name:"My GUI"}),U=function(){var e=Object(i.useState)(B),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)(function(){null===n&&(B=new D.GUI({name:"My GUI",width:0}),r(B))},[n]),null!==n&&null!==n.domElement.parentElement&&n.domElement.parentElement.removeChild(n.domElement),n},k=function(e,t){var n=U();if(null!==n){if(Object.keys(n.__folders).includes(e))return n.__folders[e];var i=n.addFolder(e);if(!0===t)return i.open(),i}return null};function j(e,t,n,r,a){var s=Object(i.useState)(t),h=Object(o.a)(s,2),u=h[0],l=h[1];if(null===e)return null;var f=e.__controllers.reduce(function(e,t){return Object(w.a)({},e,Object(c.a)({},Object.keys(t.object)[0],t))},{}),g=null;return null===(g=void 0===f[n]?e.add(Object(c.a)({},n,t),n,r,a):f[n])?null:(g.onChange(function(e){return l(e)}),u)}var L=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WebGLRenderingContext.UNSIGNED_BYTE;Object(m.a)(this,e),this.gl=void 0,this.width=0,this.height=0,this.format=WebGLRenderingContext.RGBA,this.type=WebGLRenderingContext.UNSIGNED_BYTE,this.texture=void 0,this.frameBuffer=void 0,this.gl=t,this.type=n,this.texture=this.gl.createTexture(),this.resize(16,16),this.frameBuffer=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.frameBuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0)}return Object(g.a)(e,[{key:"getTexture",value:function(){return this.texture}},{key:"getFrameBuffer",value:function(){return this.frameBuffer}},{key:"resize",value:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,null))}},{key:"destruct",value:function(){this.frameBuffer&&this.gl.deleteFramebuffer(this.frameBuffer),this.texture&&this.gl.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}}]),e}(),F=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(m.a)(this,e),this.gl=void 0,this.width=0,this.height=0,this.frame=0,this.textures=[],this.program=void 0,this.shader=void 0,this.posAttributeIndex=void 0,this.uvAttributeIndex=void 0,this.uniformGlobalTime=void 0,this.uniformTime=void 0,this.uniformResolution=void 0,this.frameBuffer0=void 0,this.frameBuffer1=void 0,this.gl=t,n>=0&&(this.frameBuffer0=new L(t,n),this.frameBuffer1=new L(t,n))}return Object(g.a)(e,[{key:"addImage",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];n>=4&&console.warn("ImageEffectRenderer: A maximum of 4 slots is available, slotIndex is out of bounds."),this.textures[n]&&console.warn("ImageEffectRenderer: Image already added to slot "+n+". Use updateImage if you want to update an existing slot."),this.textures[n]=t instanceof e?t:this.gl.createTexture(),this.gl.useProgram(this.getProgram()),this.gl.uniform1i(this.gl.getUniformLocation(this.getProgram(),"iChannel"+n),n),this.updateImage(t,n,i,r,a,s)}},{key:"updateImage",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];t instanceof e?(this.updateTexture(t,t.getSrc().getTexture(),n,i,r,s),this.updateTexture(t,t.getDest().getTexture(),n,i,r,s)):(this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[n]),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,a?1:0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.updateTexture(t,this.textures[n],n,i,r,s))}},{key:"updateTexture",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform2f(this.gl.getUniformLocation(this.getProgram(),"iChannelResolution"+n),e.width,e.height),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,i?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,r?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),a?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)}},{key:"setUniformFloat",value:function(e,t){this.gl.useProgram(this.program),this.gl.uniform1f(this.gl.getUniformLocation(this.getProgram(),e),t)}},{key:"setUniformInt",value:function(e,t){this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.getProgram(),e),t)}},{key:"setUniformVec2",value:function(e,t,n){this.gl.useProgram(this.program),this.gl.uniform2f(this.gl.getUniformLocation(this.getProgram(),e),t,n)}},{key:"setUniformVec3",value:function(e,t,n,i){this.gl.useProgram(this.program),this.gl.uniform3f(this.gl.getUniformLocation(this.getProgram(),e),t,n,i)}},{key:"setUniformVec4",value:function(e,t,n,i,r){this.gl.useProgram(this.program),this.gl.uniform4f(this.gl.getUniformLocation(this.getProgram(),e),t,n,i,r)}},{key:"compileShader",value:function(e){if(this.shader!==e){this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.shader=e,this.program=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER),n=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(t,"\n            attribute vec2 aPos;\n            attribute vec2 aUV;\n            \n            varying vec2 vUV0;\n            \n            void main(void) {\n                vUV0 = aUV;\n                gl_Position = vec4(aPos, 0.0, 1.0);\n            }\n        "),this.gl.compileShader(t);var i=this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS);if(!i)throw new Error("ImageEffectRenderer: Vertex shader compilation failed: ".concat(this.gl.getShaderInfoLog(t)));if(this.gl.shaderSource(n,"\n            #ifdef GL_ES\n                precision highp float;\n            #endif\n            \n            varying vec2 vUV0;\n            \n            uniform vec2 iResolution;\n            uniform float iTime;\n            uniform float iGlobalTime;\n            uniform vec4 iMouse;\n            \n            uniform highp sampler2D iChannel0;\n            uniform highp sampler2D iChannel1;\n            uniform highp sampler2D iChannel2;\n            uniform highp sampler2D iChannel3;\n            \n            uniform vec2 iChannelResolution0;\n            uniform vec2 iChannelResolution1;\n            uniform vec2 iChannelResolution2;\n            uniform vec2 iChannelResolution3;\n            \n            void mainImage(out vec4, vec2);\n            \n            vec4 texture(sampler2D tex, vec2 uv) {\n                return texture2D(tex, uv);\n            }\n            \n            void main(void) {\n            \tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n                mainImage(gl_FragColor, gl_FragCoord.xy);\n            }\n        "+e),this.gl.compileShader(n),!(i=this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)))throw new Error("ImageEffectRenderer: Shader compilation failed: ".concat(this.gl.getShaderInfoLog(n)));if(this.gl.attachShader(this.getProgram(),t),this.gl.attachShader(this.getProgram(),n),this.gl.linkProgram(this.getProgram()),!(i=this.gl.getProgramParameter(this.getProgram(),this.gl.LINK_STATUS)))throw new Error("ImageEffectRenderer: Program linking failed: ".concat(this.gl.getProgramInfoLog(this.getProgram())));this.posAttributeIndex=this.gl.getAttribLocation(this.getProgram(),"aPos"),this.uvAttributeIndex=this.gl.getAttribLocation(this.getProgram(),"aUV"),this.gl.useProgram(this.program),this.uniformGlobalTime=this.gl.getUniformLocation(this.getProgram(),"iGlobalTime"),this.uniformTime=this.gl.getUniformLocation(this.getProgram(),"iTime"),this.uniformResolution=this.gl.getUniformLocation(this.getProgram(),"iResolution")}}},{key:"getSrc",value:function(){return this.frame%2===0?this.frameBuffer0:this.frameBuffer1}},{key:"getDest",value:function(){return this.frame%2===1?this.frameBuffer0:this.frameBuffer1}},{key:"draw",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.width=0|i,this.height=0|r;var a=this.getDest();a&&(a.resize(this.width,this.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.getFrameBuffer())),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.gl.uniform1f(this.uniformGlobalTime,n),this.gl.uniform1f(this.uniformTime,n),this.gl.uniform2f(this.uniformResolution,i,r);for(var s=0;s<this.textures.length;++s)this.gl.activeTexture(this.gl.TEXTURE0+s),this.textures[s]instanceof e?this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[s].getSrc().getTexture()):this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[s]);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.enableVertexAttribArray(this.posAttributeIndex),this.gl.vertexAttribPointer(this.posAttributeIndex,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(this.uvAttributeIndex),this.gl.vertexAttribPointer(this.uvAttributeIndex,2,this.gl.FLOAT,!1,16,8),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),a&&this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.frame++}},{key:"getShaderSource",value:function(){return this.shader}},{key:"destruct",value:function(){for(var t in this.textures)this.textures[t]instanceof e||this.gl.deleteTexture(this.textures[t]);this.textures=[],this.frameBuffer0&&(this.frameBuffer0.destruct(),this.frameBuffer0=null),this.frameBuffer1&&(this.frameBuffer1.destruct(),this.frameBuffer1=null)}},{key:"getProgram",value:function(){if(null===this.program)throw new Error("ImageEffectRenderer not initialized");return this.program}}]),e}(),N=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(m.a)(this,e),this.canvas=void 0,this.gl=void 0,this.width=0,this.height=0,this.quadVBO=void 0,this.requestAnimationID=void 0,this.time=0,this.container=void 0,this.animationLoop=void 0,this.canvasScale=1,this.mainBuffer=void 0,this.buffers=[],!i)throw new Error("Use ImageEffectRenderer.createTemporary to create a ImageEffectRenderer");if(this.container=t,this.animationLoop=n,this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("experimental-webgl",{premultipliedAlpha:!0}),!this.gl)throw new Error("ImageEffectRenderer: Failed to request a 3D context, aborting...")}return Object(g.a)(e,[{key:"getCanvas",value:function(){return this.canvas}},{key:"play",value:function(){this.requestAnimationID||(this.animationLoop=!0,this.draw(0))}},{key:"stop",value:function(){this.requestAnimationID&&(window.cancelAnimationFrame(this.requestAnimationID),this.requestAnimationID=0,this.animationLoop=!1)}},{key:"getMainBuffer",value:function(){return this.mainBuffer}},{key:"addBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WebGLRenderingContext.UNSIGNED_BYTE;return this.buffers[e]&&this.buffers[e].destruct(),this.buffers[e]=new F(this.gl,n),this.buffers[e].compileShader(t),this.buffers[e]}},{key:"getBuffer",value:function(e){return this.buffers[e]}},{key:"updateSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(t,"px")}},{key:"generateNDCQuad",value:function(){var e=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]);this.quadVBO=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quadVBO),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW)}},{key:"draw",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;for(var n in this.time=t/1e3,this.canvas.width===this.width&&this.canvas.height===this.height||(this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.width=this.canvas.width,this.height=this.canvas.height),this.buffers)this.buffers[n].draw(this.quadVBO,this.time,this.canvas.width,this.canvas.height);this.mainBuffer.draw(this.quadVBO,this.time,this.canvas.width,this.canvas.height),this.animationLoop&&(this.requestAnimationID=window.requestAnimationFrame(function(t){return e.draw(t)}))}},{key:"addImage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.mainBuffer.addImage(e,t,n,i,r,a)}},{key:"updateImage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.mainBuffer.updateImage(e,t,n,i,r,a)}},{key:"setUniformFloat",value:function(e,t){this.mainBuffer.setUniformFloat(e,t)}},{key:"setUniformInt",value:function(e,t){this.mainBuffer.setUniformInt(e,t)}},{key:"setUniformVec2",value:function(e,t,n){this.mainBuffer.setUniformVec2(e,t,n)}},{key:"setUniformVec3",value:function(e,t,n,i){this.mainBuffer.setUniformVec3(e,t,n,i)}},{key:"setUniformVec4",value:function(e,t,n,i,r){this.mainBuffer.setUniformVec4(e,t,n,i,r)}},{key:"destruct",value:function(){for(var e in this.buffers)this.buffers[e].destruct();this.buffers=[],this.mainBuffer.destruct()}},{key:"renderTime",get:function(){return this.time}}],[{key:"createTemporary",value:function(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e.IERActive.length>=e.MAX_IMAGE_EFFECT_RENDERERS)throw new Error("Maximum number of ImageEffectRenderer's reached, no new ImageEffectRenderer created");if(e.IERPool.length>0){for(var s=!1,o=0;o<e.IERPool.length;o++)e.IERPool[o].mainBuffer.getShaderSource()===n&&(i=e.IERPool[o],e.IERPool.splice(o,1),s=!0);s||(i=e.IERPool[0],e.IERPool.splice(0,1))}else i=new e(t,r,!0);return i.animationLoop=r,i.container=t,i.canvasScale=a,t.appendChild(i.canvas),i.quadVBO||i.generateNDCQuad(),i.mainBuffer||(i.mainBuffer=new F(i.gl)),i.mainBuffer.compileShader(n),i.gl.clearColor(0,0,0,0),i.gl.viewport(0,0,i.canvas.width,i.canvas.height),i.gl.clear(i.gl.COLOR_BUFFER_BIT),i.gl.enable(i.gl.BLEND),i.gl.blendFunc(i.gl.ONE,i.gl.ONE_MINUS_SRC_ALPHA),i.width=i.canvas.width,i.height=i.canvas.height,e.IERActive.push(i),i}},{key:"releaseTemporary",value:function(t){t.stop(),t.destruct(),t.canvas.parentNode.removeChild(t.canvas);var n=e.IERActive.indexOf(t);if(!(n>-1))throw new Error("Can't find the EffectRenderer in the active pool");e.IERActive.splice(n,1),e.IERPool.push(t)}}]),e}();N.MAX_IMAGE_EFFECT_RENDERERS=10,N.IERActive=[],N.IERPool=[];var G="#define SAMPLES 8\n#define N(a) (a.yx*vec2(1,-1))\n#define PI 3.14159265358979\n\nuniform vec2 _StructureOffset;\n\nvec2 getInput(vec2 pos) {\n    return texture2D(iChannel2, pos/iResolution.xy).xy;\n}\n\nvec2 getGradient(vec2 pos,float delta) {\n    vec2 d=vec2(delta,0);\n    return vec2(\n        dot((getInput(pos+d.xy)-getInput(pos-d.xy)).xy,vec2(.333)),\n        dot((getInput(pos+d.yx)-getInput(pos-d.yx)).xy,vec2(.333))\n    )/delta;\n}\n\nvec4 getNoise(vec2 pos) {\n    return texture2D(iChannel1,pos * (1./256.));\n}\n\nfloat getDist(vec2 pos) {\n    return smoothstep(.9,1.1,length(getInput(pos))*.9+getNoise(pos*.2).x);\n}\n\nfloat getBorder(vec2 p) {\n    vec2 p0 = p, p1 = p;\n    float border = 0., norm = 0.;\n\n    for(int i=0;i<SAMPLES;i++) {\n        vec2 gr0 = getGradient(p0,2.);\n        vec2 gr1 = getGradient(p1,2.);\n\n        float grl0 = clamp(10.*length(gr0),0.,1.);\n        float grll = clamp(10.*length(gr1),0.,1.);\n\n        p0 += 3.8 *normalize(N(gr0));\n        p1 -= 3.8 *normalize(N(gr1));\n\n        float fact = 1.-float(i)/float(SAMPLES);\n        border += fact*mix(1.,getDist(p0)*2.,grl0);\n        border += fact*mix(1.,getDist(p1)*2.,grll);\n\n        norm += fact;\n    }\n    border /= norm*2.;\n\n    return clamp(border+.1,0.,1.);\n}\n\nvoid mainImage( out vec4 c, vec2 p ) {\n  vec2 fc = p.xy;\n  vec2 vUV = p/iResolution.xy;\n\n  float emb = getNoise(fc + .5 + _StructureOffset*256.).x - getNoise(fc - .5 + _StructureOffset*256.).x;\n\n  vec4 fragColor = texture2D(iChannel0, vUV);\n  fragColor.rgb = clamp(fragColor.rgb, vec3(0), vec3(1));\n  fragColor.rgb = pow(fragColor.rgb, vec3(.5));\n\n  vec3 r = (1.-fract(fragColor.rgb * vec3(1.,4.,4.) + .5));\n  r = clamp(r*1.5-.4, vec3(0), vec3(1));\n  r = pow(r, vec3(4.));\n\n  fragColor.rgb += r.rgb * .2 * (1.-fragColor.rgb);\n\n  vec3 col1 = vec3(240./255., 190./255., 220./255.);\n  vec3 col2 = vec3(190./255., 190./255., 240./255.);\n  vec3 col3 = vec3(170./255., 230./255., 170./255.);\n\n  vec4 inp = texture2D(iChannel2, vUV);\n\n  col1 = mix( col1, col1 * col1, .5*smoothstep(.1,.3, inp.y + inp.x));\n  col2 = mix( col2, col2 * col2, .5*smoothstep(.1,.3, inp.y + inp.x));\n  col3 = mix( col3, col3 * col3, smoothstep(.1,.3, inp.z));\n\n  vec3 col = (1.-col1) * fragColor.r + (1.-col2) * fragColor.g  + (1.-col3) * fragColor.b;\n\n  float b = 1.-getBorder(p);\n  col *= 1. - .7 * pow(b, .5);\n//  col *= 1. + pow(b, .5);\n\n  vec3 structure = texture2D(iChannel3, fc / 512. + _StructureOffset).rgb;\n  col *= .4+.6*smoothstep(.7, .975, structure.r);\n\n  fragColor.rgb = 1.-col;\n\n  fragColor.a = 1.;\n  fragColor.rgb *= 0.95 + 0.1 * emb;\n\n  c = fragColor;\n}",M="uniform float _FrameReset;\n\nconst float _InputStrength = 0.075;\nconst float _FadeOutStrength = 0.025;\n\nfloat hash13(vec3 p3) {\n    p3  = fract(p3 * .1031);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nvec2 hash22(vec2 p) {\n\tvec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yzx+19.19);\n    return fract((p3.xx+p3.yz)*p3.zy);\n}\n\nvec4 getInput(vec2 pos) {\n    vec4 inp = texture2D(iChannel2, pos / iResolution);\n\n    float s = inp.x;\n\n    inp.r = max(s > 0. ? .01 : 0., s * 2. - 1.);\n    inp.g = min(s * 2., 1.);\n    inp.b = inp.b;\n\n    inp.g = max(0., inp.g - inp.r);\n\n    return inp;\n}\n\nvec4 sampleTex(vec2 pos) {\n    vec4 src = texture2D(iChannel0, pos / iResolution);\n    vec4 inp = getInput(pos);\n\n//    if (_FrameReset > .5) src.rg = mix(src.rg, inp.rg * _InputStrength, .5);\n\n    return mix(src, inp, inp * inp * _InputStrength);\n}\n\nvoid mainImage(out vec4 c, vec2 p) {\n    vec4 fragColor;\n    vec2 fc = p.xy;\n\n    vec2 noise2 = texture2D(iChannel1, (floor(fc * 1.9) + 0.5) / 256.).xy;\n    fc += (noise2 * 2.0 - 1.0) * 2.5;\n\n    vec3 v0 = sampleTex(fc + vec2(-1, 0)).rgb;\n    vec3 v1 = sampleTex(fc + vec2(1, 0)).rgb;\n    vec3 v2 = sampleTex(fc + vec2(0, -1)).rgb;\n    vec3 v3 = sampleTex(fc + vec2(0, 1)).rgb;\n\n    vec3 avg = (v0 + v1 + v2 + v3) * 0.25;\n    float wx = abs(v0.g - v1.g);\n    float wy = abs(v2.g - v3.g);\n\n    fragColor.rgb = wx > wy ? mix(avg, (v0 + v1) * .5, .75) : mix(avg, (v2 + v3) * .5, .75);\n//    fragColor.rgb = mix(fragColor.rgb, (v3 * 8. + v2 * 6. + v0 + v1) / 16., .5);\n\n    fragColor.rgb *= (1.-_FadeOutStrength);\n    float h = hash13(vec3(p, iTime));\n    fragColor.rgb = max(vec3(0.), fragColor.rgb - h*(1./256.));\n    c = fragColor;\n}",Y="void mainImage( out vec4 c, vec2 p ) {\n    vec4 fragColor;\n    vec2 fc = p.xy / iResolution.xy;\n    fc.y = 1.-fc.y;\n\n    float color = texture2D(iChannel0, fc).r;\n    float mask = 1. - texture2D(iChannel1, fc).r;\n    c = vec4(max(0.,1.-color), 0, mask * color, 1.);\n}",_=n(22),W=n.n(_),Z=n(34),Q=n.n(Z),X=n(23),z=n.n(X),J=function(){function e(t){Object(m.a)(this,e),this.canvasWrapper=t,this.imageEffectRenderer=void 0,this.frameReset=!1,this.structureOffset=[0,0],this._loadState=!1,this._loadProgress=0,this.imageEffectRenderer=N.createTemporary(t,G,!1),this.imageEffectRenderer.getCanvas().style.pointerEvents="none",this.imageEffectRenderer.addBuffer(0,Y),this.loadImage(this.imageEffectRenderer.getBuffer(0),z.a,0),this.loadImage(this.imageEffectRenderer.getBuffer(0),z.a,1);for(var n=0;n<e.SIMULATION_STEPS;n++)this.imageEffectRenderer.addBuffer(n+1,M),this.imageEffectRenderer.getBuffer(n+1).addImage(this.imageEffectRenderer.getBuffer(Math.max(1,n)),0),this.loadImage(this.imageEffectRenderer.getBuffer(n+1),W.a,1),this.imageEffectRenderer.getBuffer(n+1).addImage(this.imageEffectRenderer.getBuffer(0),2),this.imageEffectRenderer.getBuffer(n+1).setUniformFloat("_FrameReset",0);this.imageEffectRenderer.addImage(this.imageEffectRenderer.getBuffer(e.SIMULATION_STEPS),0),this.loadImage(this.imageEffectRenderer.getMainBuffer(),W.a,1),this.imageEffectRenderer.addImage(this.imageEffectRenderer.getBuffer(0),2),this.loadImage(this.imageEffectRenderer.getMainBuffer(),Q.a,3),this.update(0)}return Object(g.a)(e,[{key:"loadState",get:function(){return this._loadState},set:function(e){this._loadState=e}},{key:"loadProgress",set:function(e){this._loadProgress=e},get:function(){return this._loadProgress}}]),Object(g.a)(e,[{key:"updateSize",value:function(e,t){this.imageEffectRenderer.updateSize(e,t)}},{key:"loadImage",value:function(e,t,n){var i=new Image;i.crossOrigin="Anonymous",i.src=t,i.onload=function(){return e.addImage(i,n,!1,!1)}}},{key:"updateInputCanvas",value:function(e){this.imageEffectRenderer.getBuffer(0).updateImage(e,1)}},{key:"updateNNCanvas",value:function(e){this.imageEffectRenderer.getBuffer(0).updateImage(e,0),this.frameReset=!0}},{key:"update",value:function(e){var t=this;window.requestAnimationFrame(function(e){return t.update(e)}),this.frameReset?(this.structureOffset[0]=Math.random(),this.structureOffset[1]=Math.random(),this.frameReset=!1,this.imageEffectRenderer.getBuffer(1).setUniformFloat("_FrameReset",1)):this.imageEffectRenderer.getBuffer(1).setUniformFloat("_FrameReset",0),this.imageEffectRenderer.setUniformVec2("_StructureOffset",this.structureOffset[0],this.structureOffset[1]),this.imageEffectRenderer.draw(e)}}]),e}();J.SIMULATION_STEPS=1;var V=n(35),H=n.n(V),q=n(16),K=n.n(q),$=n(36),ee=n.n($),te=function(e){var t=e.progress;return t<1?i.createElement("div",{className:ee.a.root},"Loading ",100*t,"%"):null},ne=n(37),ie=n.n(ne),re=n(15),ae=n.n(re),se=function(e){var t=e.width,n=e.height,a=Object(i.useState)(null),s=Object(o.a)(a,2),h=s[0],f=s[1],g=Object(i.useState)(null),m=Object(o.a)(g,2),v=m[0],d=m[1],p=Object(i.useState)(0),E=Object(o.a)(p,2),b=E[0],R=E[1],y=Object(i.useState)(!1),S=Object(o.a)(y,2),w=S[0],D=S[1],B=Object(i.createRef)(),U=Object(i.useState)(null),L=Object(o.a)(U,2),F=L[0],N=L[1],G=k("Neural net",!1),M=j(G,20,"Frames",1,100),Y=j(G,40,"Extra frames",1,100),_=j(G,1,"Extra frames step",1,100),W=k("Drawable canvas",!1),Z=j(W,5,"brush size",1,100),Q=j(W,200,"max stroke length",1,1e3),X=j(W,5,"blur",1,100),z=Object(i.useState)(null),V=Object(o.a)(z,2),q=V[0],$=V[1];return Object(i.useEffect)(function(){null!==v&&(v.brushSize=Z,v.maxStrokeLength=Q,v.blur=X)},[Z,Q,X,v]),Object(i.useEffect)(function(){null!==q&&q.updateSize(t,n)},[t,n,q]),Object(i.useEffect)(function(){null!==v&&(v.eventScaleX=t/512,v.eventScaleY=n/256)},[t,n,v]),Object(i.useEffect)(function(){if(null!=q&&null!==h){var e=function(e){var t=e.data;q.updateNNCanvas(t),A(x(t).getImageData(0,0,t.width,t.height))};return h.addEventListener(C.types.UPDATE,e),function(){h.removeEventListener(C.types.UPDATE,e)}}}),Object(i.useEffect)(function(){null===h&&f(new P(512,256))},[h]),Object(i.useEffect)(function(){null===q&&null!==B.current&&$(new J(B.current))},[B,q]),Object(i.useEffect)(function(){if(null!==v&&null!==F&&null!==h){var e=function(e){var t=e.data;A(t),null!==q&&q.updateInputCanvas(I(t).canvas)};return v.addEventListener(T.types.DRAW,e),function(){v.removeEventListener(T.types.DRAW,e)}}},[v,F,q,h]),Object(i.useEffect)(function(){if(null!==v&&null!==F&&null!==h&&null!==q){var e=function(){var e=Object(l.a)(u.a.mark(function e(t){var n,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,D(!0),e.next=4,F.next(n,M,Y,_);case 4:i=e.sent,q.updateInputCanvas(I(v.getCurrentImage()).canvas),h.addFrames(i),h.animate(),D(!1);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return v.addEventListener(T.types.DRAW_COMPLETE,e),function(){v.removeEventListener(T.types.DRAW_COMPLETE,e)}}},[v,F,q,Y,_,h,M]),Object(i.useEffect)(function(){null!==B.current&&null===v&&d(new O(B.current,512,256,t/512,n/256))},[q,B,v,t,n]),Object(i.useEffect)(function(){Object(l.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==F||null===q||q.loadState){e.next=12;break}return q.loadState=!0,t=H()(),n=function(e){"progress"===e.data.type&&(R(e.data.value),q.loadProgress=e.data.value)},t.addEventListener("message",n),e.next=7,t.ready;case 7:return e.next=9,t.load();case 9:t.removeEventListener("message",n),N({next:t.next}),q.loadState=!1;case 12:case"end":return e.stop()}},e)}))()},[F,q]),r.a.createElement("div",null,r.a.createElement("div",{ref:B,className:K.a.canvasScaleContainer,style:{width:"".concat(t,"px"),height:"".concat(n,"px")}},r.a.createElement(te,{progress:b}),r.a.createElement("img",{alt:"",src:ie.a,className:ae()(K.a.spinner,Object(c.a)({},K.a.spinnerVisible,w))})))},oe=n(24),ce=n(5),he=n.n(ce),ue=n(39),le=n.n(ue),fe=n(40),ge=n.n(fe),me=n(17),ve=n.n(me),de=function(e){var t=e.children,n=e.cursorImage,a=e.cursorOffsetX,s=e.cursorOffsetY,h=Object(i.createRef)(),u=Object(i.createRef)(),l=Object(i.useState)(!1),f=Object(o.a)(l,2),g=f[0],m=f[1],v=Object(i.useCallback)(function(e){null!==u.current&&(u.current.style.setProperty("left","".concat(e.offsetX+a,"px")),u.current.style.setProperty("top","".concat(e.offsetY+s,"px")))},[u,a,s]),d=Object(i.useCallback)(function(){m(!1)},[]),p=Object(i.useCallback)(function(){m(!0)},[]);return Object(i.useEffect)(function(){null!==h.current&&(h.current.addEventListener("pointermove",v),h.current.addEventListener("pointerleave",d),h.current.addEventListener("pointerenter",p))},[h,v,d,p]),r.a.createElement("div",{ref:h,className:ve.a.root},r.a.createElement("img",{src:n,ref:u,alt:"",className:ae()(ve.a.cursor,Object(c.a)({},ve.a.cursorVisible,g))}),t)},pe=n(41),Ee=n.n(pe),be=function(){var e=Object(i.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(i.useCallback)(function(){return a(!n)},[n]),c=Object(oe.useElementFit)(632,376,oe.ScaleMode.CONTAIN),h=c.ref,u=c.width,l=c.height,f=c.x,g=c.y;return r.a.createElement("div",{ref:h,className:he.a.root},r.a.createElement("div",{className:he.a.app,style:{width:"".concat(u,"px"),height:"".concat(l,"px"),top:"".concat(g,"px"),left:"".concat(f,"px")}},r.a.createElement("div",{className:he.a.header},r.a.createElement("button",{onClick:s,className:he.a.headerButton},n&&r.a.createElement("img",{src:ge.a,alt:"unmute"}),!n&&r.a.createElement("img",{src:le.a,alt:"mute"})),r.a.createElement("div",{className:he.a.headerMenu},r.a.createElement("button",{className:he.a.headerButton},"Share"),r.a.createElement("button",{className:he.a.headerButton},"About"),r.a.createElement("a",{href:"https://github.com/mediamonkslabs/brush-strokes-frontend",target:"_blank",className:he.a.headerButton},"Source"))),r.a.createElement(de,{cursorImage:Ee.a,cursorOffsetX:0,cursorOffsetY:-35},r.a.createElement(se,{width:u-120,height:l-120}))))};s.a.render(r.a.createElement(be,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.133630ab.chunk.js.map